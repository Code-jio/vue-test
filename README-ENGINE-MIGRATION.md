# 三维引擎原型测试迁移说明

## 项目概述

本项目成功将 EngineKernel 三维引擎的原型测试迁移到了 Vue 3 项目中，提供了更好的用户界面和交互体验。

## 功能特性

### 🎯 核心功能
- **三维场景渲染**: 基于 WebGL 的高性能 3D 渲染
- **轨道控制器**: 支持鼠标拖拽、缩放、旋转操作
- **天空盒系统**: 程序化天空盒渲染
- **模型加载**: 支持 GLTF/GLB 格式的 3D 模型
- **实时监控**: FPS 计数器和相机距离显示

### 🎨 界面优化
- **现代化UI**: 使用 Vue 3 Composition API 构建
- **实时调试面板**: 显示引擎状态和调试信息
- **响应式设计**: 适配不同屏幕尺寸
- **导航系统**: 支持多页面切换

## 项目结构

```
vue-test/
├── src/
│   ├── views/
│   │   ├── EnginePrototypeView.vue  # 主要的原型测试页面
│   │   └── WebGLTestView.vue        # 基础WebGL测试页面
│   ├── router/
│   │   └── index.js                 # 路由配置
│   ├── App.vue                      # 主应用组件
│   └── main.js                      # 应用入口
├── public/
│   ├── model/
│   │   └── Horse.glb               # 测试用3D模型
│   └── static/                     # 静态资源
└── index.html                      # HTML入口（引入引擎）
```

## 启动方式

### 1. 启动三维引擎开发服务器
```bash
cd EngineKernel
npm run dev
```
这会在 `http://localhost:8080` 启动引擎服务，提供 `engine-kernel.dev.js`

### 2. 启动Vue开发服务器
```bash
cd vue-test
npm run dev
```
这会在 `http://localhost:5173` 启动Vue应用

### 3. 访问应用
打开浏览器访问 `http://localhost:5173`，会自动跳转到引擎原型测试页面。

## 页面功能说明

### 引擎原型测试页面 (`/engine-prototype`)

#### 控制面板功能：
1. **引擎状态监控**
   - 初始化状态显示
   - 实时FPS计数器
   - 相机距离显示

2. **场景控制**
   - `加载模型`: 加载Horse.glb测试模型
   - `重置相机`: 将相机位置重置到初始状态
   - `切换天空盒`: 天空盒切换功能（待实现）

3. **调试信息**
   - 实时显示引擎运行日志
   - 支持不同级别的日志（info、success、warning、error）
   - 自动滚动显示最新20条日志

#### 交互操作：
- **鼠标左键拖拽**: 旋转相机视角
- **鼠标滚轮**: 缩放场景
- **鼠标右键拖拽**: 平移视角

## 技术架构

### Vue 3 集成
- 使用 Composition API 管理组件状态
- 响应式数据绑定实现实时UI更新
- 生命周期钩子管理引擎资源

### 引擎插件系统
- **BaseScene**: 基础场景管理
- **ResourceReaderPlugin**: 资源加载器
- **RenderLoopPlugin**: 渲染循环
- **orbitControls**: 轨道控制器
- **SkyBoxPlugin**: 天空盒渲染

### 错误处理
- 完善的异常捕获和处理机制
- 用户友好的错误提示
- 调试日志记录所有关键操作

## 开发注意事项

### 1. 依赖关系
- Vue项目依赖于EngineKernel的构建输出
- 确保两个开发服务器都在运行
- 模型文件路径需要匹配引擎配置

### 2. 资源路径
- 3D模型放在 `public/model/` 目录
- 引擎通过 `/public` 路径访问资源
- 静态资源通过Vite插件处理

### 3. 性能优化
- 组件卸载时正确清理引擎资源
- 避免内存泄漏
- 合理使用requestAnimationFrame

## 后续扩展计划

- [ ] 实现天空盒切换功能
- [ ] 添加更多3D模型支持
- [ ] 集成材质编辑器
- [ ] 添加光照控制面板
- [ ] 实现场景保存/加载功能
- [ ] 优化移动端适配

## 故障排除

### 常见问题：
1. **引擎初始化失败**: 检查EngineKernel开发服务器是否启动
2. **模型加载失败**: 确认模型文件路径正确
3. **Canvas未找到**: 确保DOM元素已正确渲染

### 调试方法：
- 查看浏览器控制台错误信息
- 观察调试面板的日志输出
- 检查网络请求是否成功 